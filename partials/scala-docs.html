<div class="container-fluid">
  <div class="row">
    <div class="col-md-2">
        <div class="well panel panel-default">
            <div class="panel-heading">General</div>
            <div class="panel-body">
                <ul>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('intro')">Intro</button></li>
                </ul>
            </div>
            <div class="panel-heading">Configuration</div>
            <div class="panel-body">
                <ul>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('dependencies')">Dependencies</button></a></li>
                </ul>
            </div>

            <div class="panel-heading">Controllers</div>
            <div class="panel-body">
                <ul>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('controllerSubjectPresent')">SubjectPresent</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('controllerSubjectNotPresent')">SubjectNotPresent</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('controllerRestrict')">Restrict</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('controllerDynamic')">Dynamic</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('controllerPattern')">Pattern</button></li>
                </ul>
            </div>

            <div class="panel-heading">Templates</div>
            <div class="panel-body">
                <ul>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('templateUtils')">TemplateUtils</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('templateSubjectPresent')">subjectPresent</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('templateSubjectNotPresent')">subjectNotPresent</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('templateRestrict')">restrict</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('templateDynamic')">dynamic</button></li>
                    <li><button type="button" class="btn btn-link" ng-click="setSection('templatePattern')">pattern</button></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-10">
      <div ng-if="section == 'intro'">
        <h3>Intro</h3>
        <p>In progress</p>
        <span next-section section="dependencies" label="Dependencies"></span>
      </div>
      <div ng-if="section == 'dependencies'">
        <h3>Dependencies</h3>
        <h4>Repository</h4>
        <p>As of Deadbolt 2.3.2, you no longer need to add the Objectify repository as the artifacts are available via Maven Central.<p>

        <p>For versions prior to 2.3.2, Deadbolt is hosted in the Objectify repository. so you need to add the following to your Play
        <code>build.sbt</code>:
        <pre class="well">resolvers += Resolver.url("Objectify Play Repository", url("http://deadbolt.ws/releases/"))(Resolver.ivyStylePatterns)</pre></p>

        <h4>Which version should I use?</h4>
        <p>To help you choose the correct version to Deadbolt to use, select your preferred language and Play version below.  The necessary SBT dependency will be shown. 

        <div>
            <label for="currentLanguage" id="currentLanguageLabel">Language:</label>
            <select ng-model="currentLanguage" ng-options="availableLanguage as availableLanguage.label for availableLanguage in availableLanguages" id="currentLanguage">
            </select>
        </div>
        <div>
            <label for="playVersion" id="playVersionLabel">Play version:</label>
            <select ng-model="currentPlayVersion" ng-options="availableVersion as availableVersion.label for availableVersion in availableVersions" id="playVersion">
            </select>
        </div>
        <div ng-repeat="javaVersion in javaVersions | filter:{playVersion:currentPlayVersion.value}:true" ng-if="currentLanguage.value == 'java' || currentLanguage.value == 'all'">
          <label>SBT dependency:</label>
          <pre class="code">"{{javaVersion.groupId}}" %% "{{javaVersion.artifactId}}" % "{{javaVersion.version}}"</pre>
        </div>
        <div ng-repeat="scalaVersion in scalaVersions | filter:{playVersion:currentPlayVersion.value}:true" ng-if="currentLanguage.value == 'scala' || currentLanguage.value == 'all'">
          <label>SBT dependency:</label>
          <pre class="code">"{{scalaVersion.groupId}}" %% "{{scalaVersion.artifactId}}" % "{{scalaVersion.version}}"</pre>
        </div>

        <div>
          <h3>Scala build.sbt example</h3>

          <pre class="code">
name := """example-scala-project"""

version := "1.0-SNAPSHOT"

lazy val root = (project in file(".")).enablePlugins(PlayScala)

scalaVersion := "2.11.1"

libraryDependencies ++= Seq(
  jdbc,
  anorm,
  cache,
  ws,
  // example version, use the "which version..." tool to determine the correct one
  "be.objectify" %% "deadbolt-scala" % "2.3.3"
)

// For versions prior to 2.3.2, you need to add the Objectity repository
//resolvers += Resolver.url("Objectify Play Repository", url("http://deadbolt.ws/releases/"))(Resolver.ivyStylePatterns)
          </pre>
        </div>

        <span next-section section="controllerSubjectPresent" label="SubjectPresent"></span>
      </div>
      <div ng-if="section == 'controllerSubjectPresent'">
        <h3>SubjectPresent</h3>
        <p>In progress</p>
        <span next-section section="controllerSubjectNotPresent" label="SubjectNotPresent"></span>
      </div>
      <div ng-if="section == 'controllerSubjectNotPresent'">
        <h3>SubjectNotPresent</h3>
        <p>In progress</p>
        <span next-section section="controllerRestrict" label="Restrict"></span>
      </div>
      <div ng-if="section == 'controllerRestrict'">
        <h3>Restrict</h3>
        <p>In progress</p>
        <span next-section section="controllerDynamic" label="Dynamic"></span>
      </div>
      <div ng-if="section == 'controllerDynamic'">
        <h3>Dynamic</h3>
        <p>In progress</p>
        <span next-section section="controllerPattern" label="Pattern"></span>
      </div>
      <div ng-if="section == 'controllerPattern'">
        <h3>Pattern</h3>
        <p>In progress</p>
          <span next-section section="templateUtils" label="TemplateUtils"></span>
      </div>
      <div ng-if="section == 'templateUtils'">
        <h3>TemplateUtils</h3>
          <p>To assist in creating the structures needed to define constraints in Play templates, you can import and use <code>be.objectify.deadbolt.core.utils.TemplateUtils</code>.  This class
              provides shorthand methods that reduce clutter in your code.</p>
          <p>The following sections on template constraints will reference <code>as</code> - this method is explained below.  If you've also read the Java documentation, you might notice the
              <code>la</code> method is missing here.  This is because in the Scala version you can directly use <code>List(as("foo"))</code>.</p>
          <table class="table table-striped table-bordered">
              <thead>
              <tr>
                  <th>Signature</th>
                  <th>Description</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                  <td>String[] as(String... args)</td>
                  <td>Converts the argument into an array of Strings.</td>
              </tr>
              </tbody>
          </table>

          <span next-section section="templateSubjectPresent" label="subjectPresent"></span>
      </div>
      <div ng-if="section == 'templateSubjectPresent'">
        <h3>subjectPresent</h3>
        <p>Any template content wrapped by <code>subjectPresent</code> will only appear if a subject can be resolved by the current <code>DeadboltHandler</code>.</p>
        <p>A variation, <code>subjectPresentOr</code>, allows you to specify content to be displayed if the authorisation fails.</p>
        <p><code>subjectPresent</code> is the template equivalent to the <button type="button" class="btn btn-link" ng-click="setSection('controllerSubjectPresent')">SubjectPresent</button> controller constraint.</p>

        <h4>Imports</h4>
        <p>To use <code>subjectPresent</code> or <code>subjectPresentOr</code>, add the following import to your template.
          <pre>@import be.objectify.deadbolt.scala.views.html._</pre>
        </p>

        <h4>Examples</h4>
        <p>All examples are valid for both <code>subjectPresent</code> and <code>subjectPresentOr</code>.</p>
        <p><strong>Basic usage</strong>
<pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@subjectPresent(handler=deadboltHandler) {
  This content will be visible if a subject is present.
}</pre>
        </p>

        <p><strong>Fallback content</strong>
<pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@subjectPresentOr(handler=deadboltHandler) {
  This content will be visible if a subject is present.
}{
  This content will be present if no subject is present.
}</pre>
        </p>

        <p><strong>Define a <code>DeadboltHandler</code> in the template.</strong>  This is possible, but I recommend against it as it can reduce code re-use.
<pre>@subjectPresent(handler=new com.example.security.FooDeadboltHandler()) {
  This content will be visible if a subject is present.
}</pre>
        </p>

        <span next-section section="templateSubjectNotPresent" label="subjectNotPresent"></span>
      </div>
      <div ng-if="section == 'templateSubjectNotPresent'">
        <h3>subjectNotPresent</h3>
        <p>Any template content wrapped by <code>subjectNotPresent</code> will only appear if a subject <strong>cannot</strong> be resolved by the current <code>DeadboltHandler</code>.</p>
        <p>A variation, <code>subjectNotPresentOr</code>, allows you to specify content to be displayed if the authorisation fails.</p>
        <p><code>subjectNotPresent</code> is the template equivalent to the <button type="button" class="btn btn-link" ng-click="setSection('controllerSubjectNotPresent')">SubjectNotPresent</button> controller constraint.</p>

        <h4>Imports</h4>
        <p>To use <code>subjectNotPresent</code> or <code>subjectNotPresentOr</code>, add the following import to your template.
          <pre>@import be.objectify.deadbolt.scala.views.html._</pre>
        </p>

        <h4>Examples</h4>
        <p>All examples are valid for both <code>subjectNotPresent</code> and <code>subjectNotPresentOr</code>.</p>
        <p><strong>Basic usage</strong>
<pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@subjectNotPresent(handler=deadboltHandler) {
  This content will be visible if a subject is not present.
}</pre>
        </p>

        <p><strong>Fallback content</strong>
<pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@subjectNotPresentOr(handler=deadboltHandler) {
  This content will be visible if a subject is not present.
}{
  This content will be present if a subject is present.
}</pre>
        </p>

        <p><strong>Define a <code>DeadboltHandler</code> in the template.</strong>  This is possible, but I recommend against it as it can reduce code re-use.
<pre>@subjectNotPresent(handler=new com.example.security.FooDeadboltHandler()) {
  This content will be visible if a subject is not present.
}</pre>
        </p>

        <span next-section section="templateRestrict" label="restrict"></span>
      </div>
      <div ng-if="section == 'templateRestrict'">
          <h3>restrict</h3>
          <p><code>restrict</code> uses an ANDed set of roles within an array to determine if the content it wraps should be included in the response.  For example, a user with the roles "foo" and "bar" could see <code>restrict</code>-protected content that specified any of the following roles:
          <ul>
              <li>foo</li>
              <li>bar</li>
              <li>foo AND bar</li>
          </ul>
          </p>
          <p>However, a <code>restrict</code> that required "foo", "bar" and "hurdy" would not allow the protected content into the response.</p>
          <p><i class="fa fa-exclamation-triangle"/> If multiple arrays of roles are defined, the relationship between the arrays is OR.  This will be covered in more detail in the examples.</p>

          <p>A variation, <code>restrictOr</code>, allows you to specify content to be displayed if the authorisation fails.</p>

          <h4>Imports</h4>
          <p>To use <code>restrict</code> or <code>restrictOr</code>, you'll need to import a couple of things.
          <pre>@import be.objectify.deadbolt.scala.views.html._
@import be.objectify.deadbolt.core.utils.TemplateUtils._</pre>
          </p>

          <h4>Parameters</h4>
          <table class="table table-striped table-bordered">
              <thead>
              <tr>
                  <th>Name</th>
                  <th>Type</th>
                  <th>Description</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                  <td>handler</td>
                  <td>be.objectify.deadbolt.scala.DeadboltHandler</td>
                  <td>A <code>DeadboltHandler</code> to use when evaluating the authorization.</td>
              </tr>
              <tr>
                  <td>roles</td>
                  <td>List[Array[String]]</td>
                  <td>The roles the subject must hold for successful authorization.</td>
              </tr>
              </tbody>
          </table>

          <h4>Examples</h4>
          <p><strong>Simple usage</strong>
          <pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@restrict(handler=deadboltHandler, roles=List(as("foo"))) {
  This content will be visible if the user has the "foo" role.
}</pre>
          </p>

          <p><strong>Fallback content</strong>
          <pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@restrictOr(handler=deadboltHandler, roles=List(as("foo"))) {
  This content will be visible if the user has the "foo" role.
}{
  This content will be visible if the user don't have the "foo" role.
}</pre>
          </p>

          <p><strong>ORing roles</strong>
          <pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@restrictOr(handler=deadboltHandler, roles=List(as("foo", "bar"), as("hurdy"))) {
  This content will be visible if the user has the "foo" AND "bar" roles, or the "hurdy" role.
}{
  This content will be visible if the authorisation fails.
}</pre>
          </p>
        <span next-section section="templateDynamic" label="dynamic"></span>
      </div>
      <div ng-if="section == 'templateDynamic'">
        <h3>dynamic</h3>
          <p><code>dynamic</code> allows you to use custom constraints to determine if the content it wraps should be included in the response.</p>

          <p>A variation, <code>dynamicOr</code>, allows you to specify content to be displayed if the authorisation fails.</p>

          <h4>Imports</h4>
          <p>To use <code>dynamic</code> or <code>dynamicOr</code>, add the following import to your template.
          <pre>@import be.objectify.deadbolt.scala.views.html._</pre>
          </p>

          <h4>Parameters</h4>
          <table class="table table-striped table-bordered">
              <thead>
              <thead>
              <tr>
                  <th>Name</th>
                  <th>Type</th>
                  <th>Description</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                  <td>handler</td>
                  <td>be.objectify.deadbolt.scala.DeadboltHandler</td>
                  <td>A <code>DeadboltHandler</code> to use when evaluating the authorization.</td>
              </tr>
              <tr>
                  <td>name</td>
                  <td>String</td>
                  <td>The name of the custom authorization constraint.</td>
              </tr>
              <tr>
                  <td>meta</td>
                  <td>String</td>
                  <td>Additional information that will be passed into <code>DynamicResourceHandler#isAllowed</code>.</td>
              </tr>
              </tbody>
          </table>

          <h4>Examples</h4>
          <p><strong>Simple usage</strong>
          <pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@dynamic(handler=deadboltHandler, name="foo") {
  This content will be visible if allowed by the custom constaint "foo", as executed by the <code>DynamicResourceHandler</code> obtained from the current <code>DeadboltHandler</code>.
}</pre>
          </p>

          <p><strong>Fallback content</strong>
          <pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@dynamicOr(handler=deadboltHandler, name="foo") {
  This content will be visible if allowed by the custom constaint "foo", as executed by the <code>DynamicResourceHandler</code> obtained from the current <code>DeadboltHandler</code>.
}{
  This content will be visible if the authorization fails.
}</pre>
          </p>

          <p><strong>Provide meta information</strong>
          <pre>@(deadboltHandler: be.objectify.deadbolt.scala.DeadboltHandler)

@dynamicOr(handler=deadboltHandler, name="foo", meta="bar") {
  This content will be visible if the custom constraint "foo" allows it.
}{
  This content will be visible if the authorization fails.
}</pre>
          </p>
        <span next-section section="templatePattern" label="pattern"></span>
      </div>
      <div ng-if="section == 'templatePattern'">
        <h3>pattern</h3>
        <p>In progress</p>
      </div>
    </div>
  </div>
</div>
